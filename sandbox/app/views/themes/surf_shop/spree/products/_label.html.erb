<% shared_class = "pdp-sale-badge z-10 product-label" %>
<% mobile_pdp ||= false %>

<% if !product.available? || (@variant_from_options.present? && !@variant_from_options.in_stock?) %>
  <div class='<%= shared_class %> product-label--sold-out' style="background:#999;color:#fff;">
    <%= Spree.t(:sold_out) %>
  </div>
<% elsif product.on_sale?(current_currency) && !@all_options_selected %>
  <div class='<%= shared_class %> sale product-label--sale'>
    <%= Spree.t(:sale) %>
  </div>
<% elsif @variant_from_options&.on_sale?(current_currency) && @all_options_selected %>
  <div class='<%= shared_class %> sale product-label--sale'>
    <%= Spree.t(:sale) %>
  </div>
<% elsif product.taggings.find { |tagging| tagging.context == 'labels' } %>
  <div class='<%= shared_class %> product-label--custom' data-title="<%= product.labels.first.name.strip.downcase.truncate(20) %>">
    <%= product.labels.first.name.truncate(20) %>
  </div>
<% end %>
