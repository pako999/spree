<div
  data-modal-target="container"
  data-action="waitlist:created@window->modal#close click->modal#closeBackground keyup@window->modal#closeWithKeyboard"
  class="hidden animate-fadeIn fixed inset-0 overflow-y-auto flex items-end md:items-center justify-center z-[9999] h-dvh w-full"
  style="animation-duration: 150ms;">
  <div class="w-[92%] max-w-[420px] relative h-auto flex flex-col bg-background rounded-xl shadow-2xl overflow-hidden" style="margin: auto;">
    <%# Header %>
    <div style="padding: 24px 24px 0 24px; display: flex; align-items: flex-start; justify-content: space-between;">
      <div style="display: flex; align-items: center; gap: 12px;">
        <div style="width: 40px; height: 40px; border-radius: 10px; background: #f0fdf4; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#16a34a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg>
        </div>
        <div>
          <h4 style="font-size: 1rem; font-weight: 700; letter-spacing: 0.01em; color: #111; margin: 0;"><%= Spree.t(:product_sold_out) %></h4>
          <p style="font-size: 0.8rem; color: #6b7280; margin-top: 2px; line-height: 1.4;">
            <%= Spree.t(:add_to_waitlist_description) %>
          </p>
        </div>
      </div>
      <button
        type="button"
        data-waitlist-close-button
        data-action="modal#close"
        style="width: 32px; height: 32px; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: #9ca3af; transition: all 0.15s; background: transparent; border: none; cursor: pointer;"
        onmouseover="this.style.background='#f3f4f6';this.style.color='#374151'"
        onmouseout="this.style.background='transparent';this.style.color='#9ca3af'">
        <%= render 'spree/shared/icons/close' %>
      </button>
    </div>
    <%# Form %>
    <div style="padding: 20px 24px 24px 24px;">
      <%= form_for :waitlist, url: spree.waitlists_path, method: :post, class: "flex w-full flex-col", style: "gap: 12px;", data: { product_form_target: 'addToWaitlistForm', controller: 'turbo-stream-form enable-button' } do |f| %>
        <div>
          <%= f.hidden_field :variant_id, value: variant&.id %>
          <label style="display: block; font-size: 0.75rem; font-weight: 600; color: #374151; margin-bottom: 6px; text-transform: uppercase; letter-spacing: 0.05em;">Email address</label>
          <%= f.email_field :email, value: try_spree_current_user&.email, required: true, placeholder: "your@email.com", data: { enable_button_target: 'input' }, autofocus: true, style: "width: 100%; border: 1px solid #d1d5db; border-radius: 8px; padding: 10px 14px; font-size: 0.875rem; color: #111; outline: none; box-sizing: border-box;" %>
        </div>
        <div class="flex flex-col" style="gap: 10px;">
          <label class="flex items-center gap-2 cursor-pointer group" style="font-size: 0.8125rem;">
            <%= f.check_box :subscribe_to_newsletter, class: 'input-checkbox group-focus-within:outline' %>
            <%= Spree.t('storefront.newsletter_subscription.join') %>
          </label>
          <%= f.button Spree.t(:add_to_waitlist), type: 'submit', disabled: true, data: { enable_button_target: 'button' }, style: "width: 100%; height: 44px; background: #111; color: #fff; border: none; border-radius: 8px; font-size: 0.8125rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.08em; cursor: pointer;" %>
        </div>
      <% end %>
    </div>
  </div>
</div>

